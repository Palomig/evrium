<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ—Ç–æ—Ç–∏–ø—ã –û–ì–≠</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            padding: 30px;
            color: #e4e4e4;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #fff;
            font-weight: 300;
            font-size: 2.2rem;
        }

        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(17, 153, 142, 0.4);
        }

        .btn-danger {
            background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%);
            color: white;
        }

        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(235, 51, 73, 0.4);
        }

        .btn-info {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .btn-info:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(79, 172, 254, 0.4);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .btn-warning:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(240, 147, 251, 0.4);
        }

        .table-wrapper {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 20px;
            overflow-x: auto;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            vertical-align: top;
        }

        th {
            background: rgba(102, 126, 234, 0.3);
            font-weight: 600;
            text-transform: uppercase;
            font-size: 11px;
            letter-spacing: 1px;
            color: #a8b2d1;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        th:first-child {
            border-radius: 8px 0 0 0;
        }

        th:last-child {
            border-radius: 0 8px 0 0;
        }

        tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        td[contenteditable="true"] {
            cursor: text;
            transition: all 0.3s ease;
            border-radius: 4px;
            min-width: 80px;
            line-height: 1.5;
        }

        td[contenteditable="true"]:hover {
            background: rgba(102, 126, 234, 0.2);
        }

        td[contenteditable="true"]:focus {
            outline: none;
            background: rgba(102, 126, 234, 0.3);
            box-shadow: inset 0 0 0 2px #667eea;
        }

        .col-num {
            width: 120px;
            white-space: nowrap;
        }

        .col-type {
            width: 250px;
        }

        .col-method {
            min-width: 400px;
        }

        .image-cell {
            width: 160px;
            text-align: center;
        }

        .image-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .image-preview {
            width: 140px;
            height: 100px;
            border-radius: 8px;
            object-fit: cover;
            display: none;
            border: 2px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .image-preview:hover {
            transform: scale(1.1);
            z-index: 100;
            position: relative;
        }

        .image-preview.visible {
            display: block;
        }

        .image-upload-btn {
            padding: 8px 14px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px dashed rgba(255, 255, 255, 0.3);
            border-radius: 6px;
            color: #a8b2d1;
            cursor: pointer;
            font-size: 11px;
            transition: all 0.3s ease;
        }

        .image-upload-btn:hover {
            background: rgba(102, 126, 234, 0.3);
            border-color: #667eea;
        }

        .image-input {
            display: none;
        }

        .delete-btn {
            background: rgba(235, 51, 73, 0.2);
            border: none;
            color: #f45c43;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .delete-btn:hover {
            background: rgba(235, 51, 73, 0.4);
        }

        .remove-image-btn {
            background: rgba(235, 51, 73, 0.2);
            border: none;
            color: #f45c43;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 10px;
            display: none;
        }

        .remove-image-btn.visible {
            display: inline-block;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 1000;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }

        .notification.info {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .notification.error {
            background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%);
        }

        .actions-cell {
            width: 70px;
            text-align: center;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal.show {
            display: flex;
        }

        .modal img {
            max-width: 90%;
            max-height: 90%;
            border-radius: 12px;
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 30px;
            color: white;
            font-size: 40px;
            cursor: pointer;
        }

        .stats {
            margin-top: 20px;
            padding: 15px 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            display: flex;
            gap: 30px;
            font-size: 14px;
            color: #a8b2d1;
            flex-wrap: wrap;
        }

        .stats span {
            color: #667eea;
            font-weight: 600;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 1200px) {
            body {
                padding: 15px;
            }
            
            th, td {
                padding: 10px;
                font-size: 13px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìê –ì–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ—Ç–æ—Ç–∏–ø—ã –û–ì–≠</h1>
        
        <div class="controls">
            <button class="btn btn-primary" onclick="addRow()">
                ‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É
            </button>
            <button class="btn btn-success" onclick="saveTable()">
                üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
            </button>
            <button class="btn btn-info" onclick="loadTable()">
                üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å
            </button>
            <button class="btn btn-warning" onclick="resetToDefault()">
                üîÑ –°–±—Ä–æ—Å–∏—Ç—å –∫ –∏—Å—Ö–æ–¥–Ω–æ–º—É
            </button>
            <button class="btn btn-danger" onclick="clearTable()">
                üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë
            </button>
            <button class="btn btn-info" onclick="exportJSON()">
                üì§ –≠–∫—Å–ø–æ—Ä—Ç JSON
            </button>
        </div>

        <div class="table-wrapper">
            <table id="editableTable">
                <thead>
                    <tr>
                        <th class="col-num">‚Ññ‚Ññ –ø—Ä–æ—Ç–æ—Ç–∏–ø–æ–≤</th>
                        <th class="col-type">–ì–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–π —Ç–∏–ø –∑–∞–¥–∞—á–∏</th>
                        <th class="col-method">–ö–ª—é—á–µ–≤–æ–π –ø—Ä–∏–Ω—Ü–∏–ø –∏ –º–µ—Ç–æ–¥ —Ä–µ—à–µ–Ω–∏—è</th>
                        <th>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</th>
                        <th class="actions-cell">–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                </tbody>
            </table>
        </div>

        <div class="stats">
            <div>–í—Å–µ–≥–æ –ø—Ä–æ—Ç–æ—Ç–∏–ø–æ–≤: <span id="rowCount">0</span></div>
            <div>–° –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏: <span id="imageCount">0</span></div>
            <div>–ü–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ: <span id="lastSave">‚Äî</span></div>
        </div>
    </div>

    <div class="notification" id="notification"></div>

    <div class="modal" id="imageModal" onclick="closeModal()">
        <span class="modal-close">&times;</span>
        <img id="modalImage" src="" alt="–£–≤–µ–ª–∏—á–µ–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">
    </div>

    <script>
        // –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
        const defaultData = [
            {
                num: "1‚Äì6",
                type: "–ü–∞—Ä–∞–ª–ª–µ–ª–æ–≥—Ä–∞–º–º –∏ –±–∏—Å—Å–µ–∫—Ç—Ä–∏—Å–∞ —É–≥–ª–∞",
                method: "–°–≤–æ–π—Å—Ç–≤–æ –±–∏—Å—Å–µ–∫—Ç—Ä–∏—Å—ã: –±–∏—Å—Å–µ–∫—Ç—Ä–∏—Å–∞ —É–≥–ª–∞ –ø–∞—Ä–∞–ª–ª–µ–ª–æ–≥—Ä–∞–º–º–∞ (AK) –æ—Ç—Å–µ–∫–∞–µ—Ç —Ä–∞–≤–Ω–æ–±–µ–¥—Ä–µ–Ω–Ω—ã–π —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ ‚ñ≥ABK. –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ —á–µ—Ä–µ–∑ —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ —É–≥–ª–æ–≤: ‚à†BAK = ‚à†KAD (–±–∏—Å—Å–µ–∫—Ç—Ä–∏—Å–∞) –∏ ‚à†KAD = ‚à†BKA (–Ω–∞–∫—Ä–µ—Å—Ç –ª–µ–∂–∞—â–∏–µ). –°–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, AB = BK. –ú–µ—Ç–æ–¥: –Ω–∞–π—Ç–∏ AB (=BK), –∑–∞—Ç–µ–º BC = BK + KC, –ø–µ—Ä–∏–º–µ—Ç—Ä P = 2(AB + BC).",
                image: ""
            },
            {
                num: "7‚Äì12",
                type: "–†–æ–º–±: —É–≥–ª—ã –ø–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é –¥–æ —Ü–µ–Ω—Ç—Ä–∞",
                method: "–°–≤–æ–π—Å—Ç–≤–∞ —Ä–æ–º–±–∞ –∏ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–≥–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞: —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç —Ç–æ—á–∫–∏ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –¥–∏–∞–≥–æ–Ω–∞–ª–µ–π O –¥–æ —Å—Ç–æ—Ä–æ–Ω—ã OH ‚Äî –≤—ã—Å–æ—Ç–∞. –î–∏–∞–≥–æ–Ω–∞–ª—å –¥–µ–ª–∏—Ç—Å—è –ø–æ–ø–æ–ª–∞–º: OB = BD/2. –ú–µ—Ç–æ–¥: –≤ ‚ñ≥BOH –Ω–∞–π—Ç–∏ sin‚à†OBH = OH/OB = ¬Ω, –∑–Ω–∞—á–∏—Ç —É–≥–æ–ª 30¬∞. –£–≥–ª—ã —Ä–æ–º–±–∞: 60¬∞ –∏ 120¬∞.",
                image: ""
            },
            {
                num: "13‚Äì18",
                type: "–†–æ–º–±: –≤—ã—Å–æ—Ç–∞ —á–µ—Ä–µ–∑ –æ—Ç—Ä–µ–∑–∫–∏ —Å—Ç–æ—Ä–æ–Ω—ã",
                method: "–°–≤–æ–π—Å—Ç–≤–∞ —Ä–æ–º–±–∞ –∏ –ü–∏—Ñ–∞–≥–æ—Ä: —Å—Ç–æ—Ä–æ–Ω–∞ CD = DH + HC, –≤—Å–µ —Å—Ç–æ—Ä–æ–Ω—ã —Ä–∞–≤–Ω—ã. –ú–µ—Ç–æ–¥: –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—Ç–æ—Ä–æ–Ω—É —Ä–æ–º–±–∞ AD (=CD). –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ç–µ–æ—Ä–µ–º—É –ü–∏—Ñ–∞–≥–æ—Ä–∞ –≤ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–º ‚ñ≥ADH –¥–ª—è –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è –≤—ã—Å–æ—Ç—ã AH.",
                image: ""
            },
            {
                num: "19‚Äì22",
                type: "–ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω—ã–π —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫: –º–µ–¥–∏–∞–Ω–∞ –∫ –≥–∏–ø–æ—Ç–µ–Ω—É–∑–µ",
                method: "–°–≤–æ–π—Å—Ç–≤–æ: –º–µ–¥–∏–∞–Ω–∞ –∫ –≥–∏–ø–æ—Ç–µ–Ω—É–∑–µ —Ä–∞–≤–Ω–∞ –µ—ë –ø–æ–ª–æ–≤–∏–Ω–µ. –ú–µ—Ç–æ–¥: –Ω–∞–π—Ç–∏ –≥–∏–ø–æ—Ç–µ–Ω—É–∑—É AB –ø–æ —Ç–µ–æ—Ä–µ–º–µ –ü–∏—Ñ–∞–≥–æ—Ä–∞, –∑–∞—Ç–µ–º —Ä–∞–∑–¥–µ–ª–∏—Ç—å –µ—ë –ø–æ–ø–æ–ª–∞–º.",
                image: ""
            },
            {
                num: "23‚Äì27 –∏ 28‚Äì32",
                type: "–ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω—ã–π —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫: –≤—ã—Å–æ—Ç–∞ –∫ –≥–∏–ø–æ—Ç–µ–Ω—É–∑–µ",
                method: "–ú–µ—Ç–æ–¥ –ø–ª–æ—â–∞–¥–µ–π: S = ¬Ωab (—á–µ—Ä–µ–∑ –∫–∞—Ç–µ—Ç—ã) –∏ S = ¬Ωch (—á–µ—Ä–µ–∑ –≥–∏–ø–æ—Ç–µ–Ω—É–∑—É –∏ –≤—ã—Å–æ—Ç—É). –ú–µ—Ç–æ–¥: –Ω–∞–π—Ç–∏ —Ç—Ä–µ—Ç—å—é —Å—Ç–æ—Ä–æ–Ω—É –ø–æ –ü–∏—Ñ–∞–≥–æ—Ä—É, –∑–∞—Ç–µ–º –≤—ã—Ä–∞–∑–∏—Ç—å –≤—ã—Å–æ—Ç—É h = ab/c.",
                image: ""
            },
            {
                num: "33‚Äì38",
                type: "–¢—Ä–∞–ø–µ—Ü–∏—è: –±–∏—Å—Å–µ–∫—Ç—Ä–∏—Å—ã –ø—Ä–∏ –±–æ–∫–æ–≤–æ–π —Å—Ç–æ—Ä–æ–Ω–µ",
                method: "–°–≤–æ–π—Å—Ç–≤–∞ –æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö —É–≥–ª–æ–≤: –±–∏—Å—Å–µ–∫—Ç—Ä–∏—Å—ã –ø–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä–Ω—ã, —Ç–∞–∫ –∫–∞–∫ 2x + 2y = 180¬∞ ‚áí x + y = 90¬∞. –ú–µ—Ç–æ–¥: –¥–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ ‚ñ≥ABF ‚Äî –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω—ã–π, –Ω–∞–π—Ç–∏ —Å—Ç–æ—Ä–æ–Ω—É AB –ø–æ –ü–∏—Ñ–∞–≥–æ—Ä—É.",
                image: ""
            },
            {
                num: "39‚Äì44",
                type: "–¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫: –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –æ—Ç—Ä–µ–∑–æ–∫ –≤–Ω—É—Ç—Ä–∏",
                method: "–ü–æ–¥–æ–±–∏–µ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤ (–ø—Ä—è–º–æ–µ): –ø—Ä–∏ MN ‚à• AC, ‚ñ≥MBN ~ ‚ñ≥ABC. –ú–µ—Ç–æ–¥: –¥–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥–æ–±–∏–µ –ø–æ —É–≥–ª–∞–º –∏ —Å–æ—Å—Ç–∞–≤–∏—Ç—å –ø—Ä–æ–ø–æ—Ä—Ü–∏—é MN/AC = BN/BC.",
                image: ""
            },
            {
                num: "45‚Äì50",
                type: "–ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ –¥–∏–∞–≥–æ–Ω–∞–ª–µ–π (¬´–ë–∞–±–æ—á–∫–∞¬ª)",
                method: "–ü–æ–¥–æ–±–∏–µ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤ (–ø–µ—Ä–µ–≤—ë—Ä–Ω—É—Ç–æ–µ): ‚ñ≥ABM ~ ‚ñ≥CDM. –ú–µ—Ç–æ–¥: –ø–æ–¥–æ–±–∏–µ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–º –∏ –Ω–∞–∫—Ä–µ—Å—Ç –ª–µ–∂–∞—â–∏–º —É–≥–ª–∞–º, –ø—Ä–æ–ø–æ—Ä—Ü–∏—è AM/CM = AB/CD.",
                image: ""
            },
            {
                num: "51‚Äì56",
                type: "–ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω—ã–π —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫: –∫–∞—Ç–µ—Ç —á–µ—Ä–µ–∑ –ø—Ä–æ–µ–∫—Ü–∏—é",
                method: "–°–≤–æ–π—Å—Ç–≤–æ –≤—ã—Å–æ—Ç—ã: –∫–≤–∞–¥—Ä–∞—Ç –∫–∞—Ç–µ—Ç–∞ —Ä–∞–≤–µ–Ω –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—é –≥–∏–ø–æ—Ç–µ–Ω—É–∑—ã –Ω–∞ –ø—Ä–æ–µ–∫—Ü–∏—é –∫–∞—Ç–µ—Ç–∞. –ú–µ—Ç–æ–¥: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–æ—Ä–º—É–ª—É AB¬≤ = AH ¬∑ AC.",
                image: ""
            },
            {
                num: "57‚Äì68",
                type: "–¢—Ä–∞–ø–µ—Ü–∏—è: –±–æ–∫–æ–≤—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã –∏ —É–≥–ª—ã (—Å–¥–≤–∏–≥)",
                method: "–ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç ‚Äî –≤—ã—Å–æ—Ç–∞: –≤—ã—Å–æ—Ç–∞ —Ç—Ä–∞–ø–µ—Ü–∏–∏ –æ–¥–∏–Ω–∞–∫–æ–≤–∞. –ú–µ—Ç–æ–¥: –ø—Ä–æ–≤–µ—Å—Ç–∏ –¥–≤–µ –≤—ã—Å–æ—Ç—ã, –≤ –æ–¥–Ω–æ–º –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–º —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ –Ω–∞–π—Ç–∏ h —á–µ—Ä–µ–∑ —Ç—Ä–∏–≥–æ–Ω–æ–º–µ—Ç—Ä–∏—é, –∑–∞—Ç–µ–º –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –µ—ë –∏ –Ω–∞–π—Ç–∏ —Å—Ç–æ—Ä–æ–Ω—É AB.",
                image: ""
            },
            {
                num: "69‚Äì74",
                type: "–¢—Ä–∞–ø–µ—Ü–∏—è: –æ—Ç—Ä–µ–∑–æ–∫, –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –æ—Å–Ω–æ–≤–∞–Ω–∏—è–º",
                method: "–ü–æ–¥–æ–±–∏–µ + —Ç–µ–æ—Ä–µ–º–∞ –§–∞–ª–µ—Å–∞: –ø—Ä–æ–≤–µ—Å—Ç–∏ –¥–∏–∞–≥–æ–Ω–∞–ª—å. –ú–µ—Ç–æ–¥: –Ω–∞–π—Ç–∏ —á–∞—Å—Ç–∏ –¥–∏–∞–≥–æ–Ω–∞–ª–∏ —á–µ—Ä–µ–∑ –ø–æ–¥–æ–±–∏–µ, –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –ø–æ –§–∞–ª–µ—Å—É, —Å–ª–æ–∂–∏—Ç—å –æ—Ç—Ä–µ–∑–∫–∏: EF —Ä–∞–≤–µ–Ω –∏—Ö —Å—É–º–º–µ.",
                image: ""
            },
            {
                num: "75‚Äì79 –∏ 80‚Äì84",
                type: "–û–∫—Ä—É–∂–Ω–æ—Å—Ç—å: –¥–≤–µ —Ö–æ—Ä–¥—ã –∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ —Ü–µ–Ω—Ç—Ä–∞",
                method: "–ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç ‚Äî —Ä–∞–¥–∏—É—Å. –ú–µ—Ç–æ–¥: –Ω–∞–π—Ç–∏ —Ä–∞–¥–∏—É—Å –ø–æ –ü–∏—Ñ–∞–≥–æ—Ä—É –¥–ª—è –ø–µ—Ä–≤–æ–π —Ö–æ—Ä–¥—ã, –∑–∞—Ç–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –¥–ª—è –≤—Ç–æ—Ä–æ–π —Ö–æ—Ä–¥—ã –∏–ª–∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è.",
                image: ""
            },
            {
                num: "85‚Äì92",
                type: "–û–∫—Ä—É–∂–Ω–æ—Å—Ç—å –Ω–∞ –≤—ã—Å–æ—Ç–µ (–ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫)",
                method: "–°–≤–æ–π—Å—Ç–≤–æ –≤–ø–∏—Å–∞–Ω–Ω–æ–≥–æ —É–≥–ª–∞: —É–≥–æ–ª, –æ–ø–∏—Ä–∞—é—â–∏–π—Å—è –Ω–∞ –¥–∏–∞–º–µ—Ç—Ä, —Ä–∞–≤–µ–Ω 90¬∞. –ú–µ—Ç–æ–¥: –¥–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ BPHK ‚Äî –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫, —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –¥–∏–∞–≥–æ–Ω–∞–ª–∏ —Ä–∞–≤–Ω—ã: PK = BH.",
                image: ""
            },
            {
                num: "93‚Äì97 –∏ 98‚Äì102",
                type: "–û–∫—Ä—É–∂–Ω–æ—Å—Ç—å: ¬´–ø–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç–æ–µ –ø–æ–¥–æ–±–∏–µ¬ª",
                method: "–í–ø–∏—Å–∞–Ω–Ω—ã–π —á–µ—Ç—ã—Ä—ë—Ö—É–≥–æ–ª—å–Ω–∏–∫ –∏ –ø–æ–¥–æ–±–∏–µ: ‚ñ≥AKP ~ ‚ñ≥ABC. –ú–µ—Ç–æ–¥: –ø–æ–¥–æ–±–∏–µ –ø–æ –æ–±—â–µ–º—É —É–≥–ª—É –∏ —Ä–∞–≤–µ–Ω—Å—Ç–≤—É —É–≥–ª–æ–≤, —Å–æ—Å—Ç–∞–≤–∏—Ç—å –ø—Ä–æ–ø–æ—Ä—Ü–∏—é –∏ –Ω–∞–π—Ç–∏ KP.",
                image: ""
            },
            {
                num: "103‚Äì108 –∏ 109‚Äì114",
                type: "–û–∫—Ä—É–∂–Ω–æ—Å—Ç—å: –∫–∞—Å–∞—Ç–µ–ª—å–Ω–∞—è, —Ü–µ–Ω—Ç—Ä –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ",
                method: "–ö–∞—Å–∞—Ç–µ–ª—å–Ω–∞—è –∏ —Å–µ–∫—É—â–∞—è / –ü–∏—Ñ–∞–≥–æ—Ä. –ú–µ—Ç–æ–¥ 1: AB¬≤ = AP ¬∑ AC, –Ω–∞–π—Ç–∏ –¥–∏–∞–º–µ—Ç—Ä. –ú–µ—Ç–æ–¥ 2: –Ω–∞–π—Ç–∏ —Ä–∞–¥–∏—É—Å, –∑–∞—Ç–µ–º –ø—Ä–∏–º–µ–Ω–∏—Ç—å –ü–∏—Ñ–∞–≥–æ—Ä –≤ ‚ñ≥AOB, –ø–æ–ª—É—á–∏—Ç—å AC = AO + R.",
                image: ""
            },
            {
                num: "115‚Äì120",
                type: "–¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫: —Å—Ç–æ—Ä–æ–Ω–∞ —á–µ—Ä–µ–∑ —Ä–∞–¥–∏—É—Å –æ–ø–∏—Å–∞–Ω–Ω–æ–π –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏",
                method: "–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ç–µ–æ—Ä–µ–º–∞ —Å–∏–Ω—É—Å–æ–≤: a/sin A = 2R. –ú–µ—Ç–æ–¥: –Ω–∞–π—Ç–∏ —É–≥–æ–ª A, –∑–∞—Ç–µ–º –ø–æ —Ç–µ–æ—Ä–µ–º–µ —Å–∏–Ω—É—Å–æ–≤ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—Ç–æ—Ä–æ–Ω—É BC.",
                image: ""
            }
        ];

        let rowCounter = 0;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', () => {
            const savedData = localStorage.getItem('ogeGeometryTableData');
            if (savedData) {
                loadTable();
            } else {
                loadDefaultData();
            }
        });

        function loadDefaultData() {
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';
            rowCounter = 0;
            
            defaultData.forEach(rowData => {
                addRow(rowData);
            });
            
            updateStats();
        }

        function resetToDefault() {
            if (confirm('–°–±—Ä–æ—Å–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –∫ –∏—Å—Ö–æ–¥–Ω—ã–º –¥–∞–Ω–Ω—ã–º? –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±—É–¥—É—Ç –ø–æ—Ç–µ—Ä—è–Ω—ã.')) {
                localStorage.removeItem('ogeGeometryTableData');
                localStorage.removeItem('ogeGeometryTableLastSave');
                loadDefaultData();
                showNotification('–¢–∞–±–ª–∏—Ü–∞ —Å–±—Ä–æ—à–µ–Ω–∞ –∫ –∏—Å—Ö–æ–¥–Ω—ã–º –¥–∞–Ω–Ω—ã–º', 'info');
            }
        }

        function addRow(data = null) {
            rowCounter++;
            const tbody = document.getElementById('tableBody');
            const row = document.createElement('tr');
            row.dataset.id = rowCounter;

            const rowData = data || {
                num: '',
                type: '',
                method: '',
                image: ''
            };

            row.innerHTML = `
                <td class="col-num" contenteditable="true">${rowData.num}</td>
                <td class="col-type" contenteditable="true">${rowData.type}</td>
                <td class="col-method" contenteditable="true">${rowData.method}</td>
                <td class="image-cell">
                    <div class="image-container">
                        <img class="image-preview ${rowData.image ? 'visible' : ''}" 
                             src="${rowData.image || ''}" 
                             onclick="openModal(this.src)"
                             alt="Preview">
                        <label class="image-upload-btn">
                            üì∑ –ó–∞–≥—Ä—É–∑–∏—Ç—å
                            <input type="file" class="image-input" accept="image/*" onchange="handleImageUpload(this)">
                        </label>
                        <button class="remove-image-btn ${rowData.image ? 'visible' : ''}" onclick="removeImage(this)">
                            ‚úï –£–¥–∞–ª–∏—Ç—å
                        </button>
                    </div>
                </td>
                <td class="actions-cell">
                    <button class="delete-btn" onclick="deleteRow(this)">üóëÔ∏è</button>
                </td>
            `;

            tbody.appendChild(row);
            updateStats();
        }

        function deleteRow(btn) {
            const row = btn.closest('tr');
            row.style.animation = 'fadeOut 0.3s ease';
            setTimeout(() => {
                row.remove();
                updateStats();
                showNotification('–°—Ç—Ä–æ–∫–∞ —É–¥–∞–ª–µ–Ω–∞', 'info');
            }, 300);
        }

        function handleImageUpload(input) {
            const file = input.files[0];
            if (file) {
                if (file.size > 5 * 1024 * 1024) {
                    showNotification('–§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π (–º–∞–∫—Å. 5MB)', 'error');
                    return;
                }

                const reader = new FileReader();
                reader.onload = function(e) {
                    const container = input.closest('.image-container');
                    const preview = container.querySelector('.image-preview');
                    const removeBtn = container.querySelector('.remove-image-btn');
                    
                    preview.src = e.target.result;
                    preview.classList.add('visible');
                    removeBtn.classList.add('visible');
                    
                    updateStats();
                    showNotification('–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ', 'success');
                };
                reader.readAsDataURL(file);
            }
        }

        function removeImage(btn) {
            const container = btn.closest('.image-container');
            const preview = container.querySelector('.image-preview');
            const input = container.querySelector('.image-input');
            
            preview.src = '';
            preview.classList.remove('visible');
            btn.classList.remove('visible');
            input.value = '';
            
            updateStats();
            showNotification('–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–æ', 'info');
        }

        function openModal(src) {
            if (src) {
                document.getElementById('modalImage').src = src;
                document.getElementById('imageModal').classList.add('show');
            }
        }

        function closeModal() {
            document.getElementById('imageModal').classList.remove('show');
        }

        function getTableData() {
            const rows = document.querySelectorAll('#tableBody tr');
            const data = [];
            
            rows.forEach(row => {
                const cells = row.cells;
                const imagePreview = row.querySelector('.image-preview');
                
                data.push({
                    num: cells[0].textContent,
                    type: cells[1].textContent,
                    method: cells[2].textContent,
                    image: imagePreview.classList.contains('visible') ? imagePreview.src : ''
                });
            });
            
            return data;
        }

        function saveTable() {
            const data = getTableData();
            localStorage.setItem('ogeGeometryTableData', JSON.stringify(data));
            localStorage.setItem('ogeGeometryTableLastSave', new Date().toLocaleString('ru-RU'));
            updateStats();
            showNotification('–¢–∞–±–ª–∏—Ü–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!', 'success');
        }

        function loadTable() {
            const savedData = localStorage.getItem('ogeGeometryTableData');
            if (savedData) {
                const data = JSON.parse(savedData);
                const tbody = document.getElementById('tableBody');
                tbody.innerHTML = '';
                rowCounter = 0;
                
                data.forEach(rowData => {
                    addRow(rowData);
                });
                
                showNotification('–î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã', 'info');
            } else {
                showNotification('–ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö', 'error');
            }
            updateStats();
        }

        function clearTable() {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å—é —Ç–∞–±–ª–∏—Ü—É?')) {
                document.getElementById('tableBody').innerHTML = '';
                localStorage.removeItem('ogeGeometryTableData');
                localStorage.removeItem('ogeGeometryTableLastSave');
                rowCounter = 0;
                
                updateStats();
                showNotification('–¢–∞–±–ª–∏—Ü–∞ –æ—á–∏—â–µ–Ω–∞', 'info');
            }
        }

        function exportJSON() {
            const data = getTableData();
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'oge_geometry_prototypes.json';
            a.click();
            URL.revokeObjectURL(url);
            showNotification('JSON —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω', 'success');
        }

        function updateStats() {
            const rows = document.querySelectorAll('#tableBody tr');
            const images = document.querySelectorAll('#tableBody .image-preview.visible');
            const lastSave = localStorage.getItem('ogeGeometryTableLastSave');
            
            document.getElementById('rowCount').textContent = rows.length;
            document.getElementById('imageCount').textContent = images.length;
            document.getElementById('lastSave').textContent = lastSave || '‚Äî';
        }

        function showNotification(message, type) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∞–≤–∏—à
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeModal();
            }
            if (e.ctrlKey && e.key === 's') {
                e.preventDefault();
                saveTable();
            }
        });

        // CSS –∞–Ω–∏–º–∞—Ü–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeOut {
                from { opacity: 1; transform: translateX(0); }
                to { opacity: 0; transform: translateX(-20px); }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
